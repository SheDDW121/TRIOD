# Проект по работе с хранителями и менеджером

Этот проект включает в себя систему с хранителями, менеджером и клиентом для загрузки и получения данных. Параметры запуска и конфигурации задаются в файле "config.py".

## Параметры конфигурации

Конфигурация системы задается в файле **config.py**. В этом файле можно настроить следующие параметры:

- num_storages - количество хранителей
- print_each_step - печать ли информацию о том, как хранители и менеджер получают отдельные строки
- durability - установка очередей как durable или нет

- hash_prefix - префикс для хеширования хранителей
- ping_interval - интервал ping менеджера хранителей
- max_retries - максимальное количество повторный запросов ping прежде чем считаем, что узел "умер"
- print_only_if_dead - если False, то печатаем все отладку, а не только если умер

- chunk_size - размер чанка (ключей в словаре), на которые разбиваем данные при падении одного из хранителей репликой
- print_every_chunk - если True, то печатаем детально все операции пересылки чанков

## Убийство хранителей

Для убийства хранителей можно отправить команду KILL <ID-хранителя> через клиента. Тогда клиент перебросит запрос менеджеру, а тот - нужному хранителю, и хранитель
завершит свою работу. Также при запуске хранителей выводится из PID, и написан скрипт kill_process.py. Можно запустить kill_process.py и дать ему PID процесса, и он убьет его.


## Запуск системы

Для запуска различных компонентов системы используйте следующие команды:

1. **Запуск хранителей с репликами:**
   ```bash
        python ./storageNode.py
   ```

2. **Запуск менеджера:**
   ```bash
        python ./final_manager.py
   ```

3. **Запуск клиента:**
   ```bash
        python ./client.py
   ```
   
## Примеры команд клиента
Далее команды осуществляет клиент. Примеры команд:
  ```bash
    LOAD data/seattle-weather.csv
    LOAD data/testset.csv
    LOAD data/weather.csv
    LOAD data/weather_prediction_dataset.csv

    GET 01-01-2000
    GET 01-01-2012
    GET 31-12-2017
    GET ABSURD
    GET 2000-01-01

    KILL 2
    KILL 0
  ```

Пример связки команд для тестирования: (количество хранителей = 6):

```bash
    LOAD data/seattle-weather.csv
    LOAD data/testset.csv

    GET 01-01-2012 (ответит хранитель 4)

    KILL 4

    GET 01-01-2012 (ответит хранитель 2)

    KILL 2

    GET 01-01-2012 (ответит хранитель 5)

    LOAD data/seattle-weather.csv

    GET 01-01-2012 (ответит хранитель 5, данные добавятся в конец вывода)
  ```






